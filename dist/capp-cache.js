!function(e){function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}var t={};n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=1)}([function(e,n,t){"use strict";function o(e){(0,u.default)(window.location).then(function(n){var t=e.resources;t.forEach(function(e){var t=e.url,o=e.type,r=void 0===o?"script":o,c=e.target,u=void 0===c?"head":c,s=e.loadAsync,l=void 0===s||s,f=document.createElement(r);n.getResource((0,i.id)(t)).then(function(e){console.log("resource "+t+" was in cache"),f.appendChild(document.createTextNode(e))}).catch(function(e){console.log(e?"failed to fetch resource from cache "+t+". error: "+e:"resource "+t+" was not in cache"),f.setAttribute("src",t),setTimeout(function(){return d(t,n)},a)}).then(function(){l&&f.setAttribute("async","async"),document[u].appendChild(f)})});var o=t.map(function(e){return(0,i.id)(e.url)});l=l.concat(o)})}function r(){(0,u.default)(window.location).then(function(e){e.pruneDb(l)})}Object.defineProperty(n,"__esModule",{value:!0}),n.load=o,n.pruneDB=r;var c=t(3),u=function(e){return e&&e.__esModule?e:{default:e}}(c),i=t(2),s=t(4),a=1e3,l=[],d=function(e,n){(0,s.fetchImage)(e).then(function(t){n.putResource((0,i.id)(e),t)})}},function(e,n,t){"use strict";var o=t(0);!function(){var e=window.cappCacheResources||{resources:[]};(0,o.load)(e),window.cappCache={load:o.load,pruneDB:o.pruneDB}}()},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.id=function(e){return e}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var n=Object.create(null),t=null,u=window.indexedDB.open(o,r),i=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"readwrite";return t.transaction([e],n).objectStore(e)};return n.getResource=function(e){return new Promise(function(n,t){var o=i("readonly").get(e);o.onsuccess=function(o){o.target.result?n(o.target.result.content):(console.log("resource with id "+e+" is not in the cache"),t(null))},o.onerror=function(e){t(e)}})},n.removeResource=function(e){return new Promise(function(n,t){var o=i();o.delete(e),o.onsuccess=function(){console.log("removed resource "+e),n()},o.onerror=function(n){console.error("failed to remove resource "+e+". error: "+n),t(n)}})},n.putResource=function(e,n){return new Promise(function(t,o){var r=i(),u=r.put({id:e,content:n});c&&(u.onsuccess=function(){console.log("successfully saved item id "+e+" in cache"),t()}),u.onerror=function(n){console.error("failed to save item with id "+e+" in cache due to error "+n),o()}})},n.pruneDb=function(e){return new Promise(function(t,o){var r=i(),c=r.openCursor();c.onsuccess=function(t){var o=event.target.result;o&&(e.includes(o.key)||(n.removeResource(o.key),console.log("pruned "+o.key)),o.continue())},c.onerror=function(e){console.error("failed to get all keys while pruning cache. error"),o(e)}})},new Promise(function(o,r){u.onsuccess=function(e){t=e.target.result,o(n)},u.onupgradeneeded=function(n){var t=n.target.result;if(n.oldVersion>0)try{t.deleteObjectStore(e)}catch(n){console.log("exception when trying to delete object store during onupgradeneeded. "+JSON.stringify(n))}t.createObjectStore(e,{keyPath:"id"})},u.onerror=function(e){console.error("failed to open indexedDB "+JSON.stringify(e)),r(e)}})};var o="RESOURCE_CACHE",r=3,c=!1},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.fetchImage=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";return new Promise(function(t,o){var r=new XMLHttpRequest,c=null;r.open("GET",e,!0),r.responseType=n,r.addEventListener("load",function(){200===r.status?(c=r.response,t(c)):o(r)},!1),r.send()})}}]);