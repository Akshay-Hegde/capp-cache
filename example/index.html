
<!--This file is an usage example and not part of the library-->

<html >
<!--<html manifest="manifest.appcache">-->
<head>
    <script>
	    window.performance.mark('capp-cache-start');
    </script>
    <script>
/*
	    window.cappCacheManifest = {
		    resources: [
			    {
				    url: "https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js",
			    },
                {
                	url: "https://cdnjs.cloudflare.com/ajax/libs/select2-bootstrap-css/1.4.6/select2-bootstrap.css",
                    type: "css"
                },
			    {
				    url: "index.css",
				    type: "css"
			    }
		    ],
		   manifestUrl : "cappCacheManifest.json"
	    };
*/
    </script>
    <script src="../_dist/capp-cache.js"></script>
    <script type="text/javascript">
	   /* setTimeout(() => window.cappCache.load({
		    resources: [
			    {
				    url: "https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.4/lodash.min.js",
			    },
			    {
				    url: "https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.js",
				    cacheOnly: true,
			    },
		    ],
	    }), 1000);
	    setTimeout(window.cappCache.pruneDB, 2000);*/
	   window.cappCache.on('manifestUpdated',window.location.reload)
    </script>
</head>
<body>
<div id="container">
    <img id="capp-cache-img"/>
    <img id="capp-cache-img2"/>
    <script>
	    cappCache
//            .getBlob(window.location, "../resources/logos-cupcake.svg", "image/svg+xml", false)
            .getBlob(window.location, "https://pbs.twimg.com/media/DBiSlwrXUAA4Ko4.jpg", "image/jpeg", true)
            .then(dataUri => {document.getElementById("capp-cache-img").setAttribute("src", dataUri)});

        cappCache
            .getBlob(window.location, "../resources/logos-cupcake.svg", "image/svg+xml", false, false)
            .then(dataUri => {document.getElementById("capp-cache-img2").setAttribute("src", dataUri)});

    </script>
    <h1>Thanks for checking out CappCache!</h1>
    <p>Open your dev tools console to check what's happening under the hood.</p>
    <p>Take a look at the elements panel. All scripts and style tags are added by CappCache.
        After first load turn off your connectivity and reload, everything will still work.
    </p>
</div>
</body>
</html>