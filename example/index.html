<!--This file is an usage example and not part of the library-->

<html data-cc-manifest="cappCacheManifest.json">
<!--<html manifest="manifest.appcache">-->
<head>
    <style>
        .capp-cache {
            display: none;
        }
    </style>
    <script>
			window.performance.mark('capp-cache-start');
            window.resourceLoaded = msg => console.log(`resource loaded : ${msg}`);
    </script>
    <script>
			/*
                    window.cappCacheManifest = {
                        resources: [
                            {
                                url: "https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js",
                            },
                            {
                                url: "https://cdnjs.cloudflare.com/ajax/libs/select2-bootstrap-css/1.4.6/select2-bootstrap.css",
                                type: "css"
                            },
                            {
                                url: "index.css",
                                type: "css"
                            }
                        ],
                       manifestUrl : "cappCacheManifest.json"
                    };
            */
    </script>
    <script src="../dist/capp-cache.js"></script>
    <script type="text/javascript">
			setTimeout(() => window.cappCache.loadResources({
				resources: [
					{
						url: "./someScript.js",
                        type:"js",
						attributes: {
                            name: "custom JS",
							onload: "console.log('done js')"
						}
					},
					{
						url: "https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.js",
						cacheOnly: true,
					},
					{
						url: "./index.css",
						type: "css",
						attributes: {
							name: "custom CSS",
							onload: "console.log('done css')"
						},

					},
				],
			}), 1000);
			window.cappCache.on('manifestUpdated', window.location.reload);
			window.cappCache.setLogLevel(window.cappCache.LOG_LEVELS.log);
    </script>
</head>
<body class="capp-cache">
<div id="container">
    <img id="capp-cache-img"/>
    <img id="capp-cache-img2"/>
    <script>
			cappCache
				.getResourceUri({ url: "https://pbs.twimg.com/media/DBiSlwrXUAA4Ko4.jpg", isBinary: true })
				.then(dataUri => {
					document.getElementById("capp-cache-img").setAttribute("src", dataUri)
				});

			cappCache
				.getResourceUri({ url: "../resources/logos-cupcake.svg", isBinary: false })
				.then(dataUri => {
					document.getElementById("capp-cache-img2").setAttribute("src", dataUri)
				});

    </script>
    <h1>Thanks for checking out CappCache!</h1>
    <p>Open your dev tools console to check what's happening under the hood.</p>
    <p>Take a look at the elements panel. All scripts and style tags are added by CappCache.
        After first load turn off your connectivity and reload, everything will still work.
    </p>
</div>
</body>
</html>